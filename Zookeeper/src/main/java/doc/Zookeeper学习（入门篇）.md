### Zookeeper学习（入门篇）

#### 一、定义

1. ZK是一个数据库

2. ZK是一个具有文件系统特点的数据库
3. ZK是解决数据一致性问题的分布式数据库
4. ZK具有发布订阅功能的分布式数据库（watch）



#### 二、一致性

#### 1.一致性介绍

![](../img/cap-model.png)

- 强一致性

  进行步骤2读取操作时，必须等待集群内部数据库数据同步完成以后，这样称之为强一致性

- 弱一致性

  步骤2 读取数据库数据时，允许读出数据库同步之前的数据，这种情况称之为弱一致性

- 最终一致性

  步骤2可以读取到数据同步之前的数据，并且等待一段时间后，数据库AB数据一致，这种情况叫做最终一致性

#### 2.CPA

CAP即：

- Consistency:一致性（强一致性）
- Availability:可用性
- Partition Tolerance:分区容错性

其中：

分区容错性是指在分布式系统中遇到节点或者网络分区故障时，系统仍然可用对外提供满足一致性和可用性的服务



#### 3.如何解决数据一致性问题

##### 3.1 leader-选举机制

##### 3.2 过半机制

##### 3.3 预提交、收到ack、提交（2pc）



