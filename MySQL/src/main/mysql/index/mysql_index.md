###mysql索引与数据结构

1.创建索引的原因与应用场景
提高在海量数据查询过程的查询效率,减少查询时间

2.索引的数据结构
既然索引是为了提高查询效率,而和搜索查询相关的数据结构有:
- 二叉查找树进行二分查找,以及变种:平衡二叉树,红黑树
- B-Tree
- B+-Tree
- Hash结构
其中:在Mysql中索引的数据结构是B+Tree,原因如下:
- B+树的磁盘读写代价更低:B+树内部(非叶子节点)并没有指向关键信息的指针,只存放索引信息,不存放数据;因此内部节点相对B树更小
如果将所有内部节点的索引信息存入同一盘块中,这个盘块能容纳更多的关键字,
一次性读入内存要查找的关键字也就越多,相对来说IO读写次数也就越少
- B+树的查询效率更加稳定:由于内部节点并不是最终指向文件内容的节点,而只是指向叶子节点的索引,所以任何查找都必须走一条从根节点
到叶子节点的路,所有关键字查询的长度相同,也就是说每个数据的查询效率基本一致(O(logn))
- B+树更有利于对数据库的扫描 ,B+树只需要对全部叶子节点的遍历即可完成对所有关键字的扫描,所以对数据库中频繁使用的范围查询
更有效

3.为什么不使用Hash结构作为数据库索引的数据结构?
原因如下:
Hash算法存在Hash碰撞,即不同的Key通过Hash算法得到的Hash值可能是一样的,即多个Key指向同一个Bucket,而
Bucket中又是以链表的方式进行存储Key指向的数据
所以:
- Hash索引比较的是进行Hash运算后的值也无法保证值的大小与Hash运算之前完全一样 ,
所以仅仅能满足"="与"in",不能进行范围查询
- 无法用来进行数据的排序操作 
- 不能进行部分索引进行查询,因为对于组合索引,Hash运算在是对组合索引合并之后进行的,
而不是单独计算Hash值的,索引无法使用组合索引进行数据的查询 
- 不能避免进行表扫描,因为Hash索引最终查询的还是Bucket中的entry,无法直接通过Hash值查询到数据
- 遇到大量Hash值相等的情况性能不一定比B+Tree高

4.其他索引结构:BitMap(位图索引)
关键字在一定范围内,适合使用位图索引,一般在Oracle数据库中使用
缺点:锁的密度很大
