####JVM 三大性能调优参数

参数意义:
-Xss:规定了每个线程虚拟机栈(堆栈)大小,一般256k足够了

-Xms:堆的初始值,即该进程刚创建出来它的Java堆大小,当对象大小超过了初始容量,Java堆将会自动扩容,扩容到-Xmx大小

-Xmx:堆能达到的最大值

注:通常情况下将-Xms与-Xmx设置成一样的,因为扩容会发生内存抖动,影响程序稳定性

####其他参数
-Xmn：设置年轻代大小。整个堆大小=年轻代大小 + 年老代大小 + 持久代大小。持久代一般固定大小为64m，所以增大年轻代后，将会减小年老代大小。此值对系统性能影响较大，Sun官方推荐配置为整个堆的3/8。
是 -XX:NewSize   和  -XX:MaxNewSize 参数的简写新式

-XX:MetaspaceSize ：初始化的元空间Metaspace大小，控制元空间发生GC的阈值。GC后，动态增加或降低MetaspaceSize。在默认情况下，这个值大小根据不同的平台在12M到20M浮动。

-XX:MaxMetaspaceSize：限制Metaspace增长的上限，防止因为某些情况导致Metaspace无限的使用本地内存，影响到其他程序。在本机上该参数的默认值为4294967295B（大约4096MB）

-XX:NewRatio
新生代（Eden + 2*S）与老年代（不包括永久区）的比值 例如-XX:NewRatio=4 表示新生代:老年代 = 1:4 即老年代占整个对的4/5；默认值=2

-XX:SurvivorRatio：2个Survivor区和Eden区的比值 例如：-XX:SurvivorRatio=8 表示 两个Survivor区:Eden区=2:8 ,每个Survivor占 1/10 ；JVM默认=8

-XX:MaxTenuringThreshold=15
该参数主要是控制新生代需要经历多少次GC晋升到老年代中的最大阈值。在JVM中用4个bit存储（放在对象头中），所以其最大值是15。
如果该值=0则表示对象在Eden区gc后不经过Survivor区直接进入老年代。
如果该值等于15，并非意味着，对象必须要经历15次YGC才会晋升到老年代中。
例如，当survivor区空间不够时，便会提前进入到老年代中，但这个次数一定不大于设置的最大阈值。
通过控制对象进入老年代的频率，可以控制老年代内存的大小，以此控制老年代的gc次数

####JVM内存模型中,堆和栈的区别

内存分配策略:
- 静态存储:编译时确定每个数据目标在运行时的存储空间需求
- 栈式存储:数据区需求在编译时未知,运行时模块入口前确定
- 堆式存储:编译时或运行时模块入口都无法确定,动态分配

区别:
1. 管理方式:栈自动释放内存,堆需要gc
2. 空间大小:堆比栈大
3. 碎片相关:栈产生的碎片远小于堆
4. 内存分配方式:栈支持静态和动态分配,堆只支持动态分配
5. 效率:栈的效率高于堆